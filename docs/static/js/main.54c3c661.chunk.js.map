{"version":3,"sources":["SearchBox/SearchBox.js","services/FavouriteService.js","PostList/PostList.js","services/RedditService.js","TopList/TopList.js","reportWebVitals.js","FavouriteList/FavouriteList.js","index.js"],"names":["SearchBox","props","state","text","onSearch","evt","input_text","target","value","startsWith","substring","this","setState","key","onChange","onSubmit","length","onKeyUp","className","placeholder","onClick","disabled","Component","FavouriteService","favs","JSON","parse","window","localStorage","getItem","favs_out","any_removed","k","v","id","url","title","setFavourites","data","setItem","stringify","post","getFavourites","PostList","posts","toggleFavourite","forceUpdate","hasPosts","fav","map","thumbnail","src","alt","href","score","Provider","color","empty_message","RedditService","subreddit","limit","fetchJsonp","jsonpCallback","then","response","json","children","forEach","kind","push","permalink","TopList","useState","setSubreddit","setPosts","newsub","getHotPosts","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","FavouriteList","Object","values","ReactDOM","render","StrictMode","path","component","document","getElementById"],"mappings":"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","file":"static/js/main.54c3c661.chunk.js","sourcesContent":["import './SearchBox.css';\n\nimport { Component } from 'react';\n\nclass SearchBox extends Component {\n\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            text: \"\",\n            onSearch: props.onSearch || (()=>{})\n        }\n    }\n\n    onChange(evt) {\n        var input_text = evt.target.value;\n\n        if(input_text.startsWith(\"r/\")) {\n            input_text = input_text.substring(2);\n        }\n\n        this.setState({text: input_text});\n    }\n\n    onKeyUp(evt) {\n        if(evt.key === \"Enter\") {\n            this.onChange(evt);\n            this.onSubmit();\n        }\n    }\n\n    onSubmit() {\n        if(this.state.text.length > 0) {\n            this.state.onSearch(this.state.text);\n        }\n    }\n\n    render() {\n        return (\n            <div>\n                <input\n                    onChange={evt=>this.onChange(evt)}\n                    onKeyUp={evt=>this.onKeyUp(evt)}\n                    className=\"SearchBox-Input\"\n                    placeholder=\"Subreddit Name\"/>\n\n                <button\n                    onClick={() => this.onSubmit()}\n                    disabled={this.state.text.length === 0}\n                    className=\"SearchBox-Button\">\n                    Go\n                </button>\n            </div>\n        );\n    }\n}\n\nexport default SearchBox;\n","\nexport class FavouriteService {\n    \n    static getFavourites() {\n        var favs = JSON.parse(window.localStorage.getItem(\"favourites\")) || {};\n\n        var favs_out = {};\n\n        var any_removed = false;\n\n        for(var k in favs) {\n            var v = favs[k];\n\n            if(typeof(k) === \"string\" && v && v.id && v.url && v.title) {\n                favs_out[k] = v;\n            } else {\n                any_removed = true;\n            }\n        }\n\n        if(any_removed) {\n            this.setFavourites(favs_out);\n        }\n\n        return favs_out;\n    }\n\n    static setFavourites(data) {\n        window.localStorage.setItem(\"favourites\", JSON.stringify(data));\n    }\n    \n    static toggleFavourite(post) {\n        var favs = FavouriteService.getFavourites();\n\n        if(favs[post.id]) {\n            favs[post.id] = null;\n        } else {\n            favs[post.id] = post;\n        }\n\n        FavouriteService.setFavourites(favs);\n    }\n\n}\n","import './PostList.css';\n\nimport { Component } from 'react';\n\nimport { IconContext } from 'react-icons';\n\nimport { FaBookmark, FaRegBookmark } from 'react-icons/fa';\n\nimport { FavouriteService } from '../services/FavouriteService';\n\nclass PostList extends Component {\n\n    get hasPosts() {\n        return this.props.posts && this.props.posts.length > 0;\n    }\n\n    toggleFavourite(post) {\n        FavouriteService.toggleFavourite(post);\n\n        this.forceUpdate();\n    }\n\n    render() {\n        if(this.hasPosts) {\n            const fav = FavouriteService.getFavourites();\n            return (\n                <div className=\"PostList-List\">\n                    {this.props.posts.map(post => (\n                        <div className=\"PostList-Post\" key={post.id}>\n                            {post.thumbnail ? <img src={post.thumbnail} alt={post.title}></img> : null}\n                            <div className=\"PostList-PostBody\">\n                                <a href={post.url}>{post.title}</a>\n                                <div className=\"PostList-Score\">{post.score}</div>\n                            </div>\n                            <div>\n                                <IconContext.Provider value={{ color: \"inherit\" }}>\n                                    <div className=\"PostList-Favourite\" onClick={() => this.toggleFavourite(post)}>\n                                        {fav[post.id] ? <FaBookmark></FaBookmark> : <FaRegBookmark />}\n                                    </div>\n                                </IconContext.Provider>\n                            </div>\n                        </div>\n                    ))}\n                </div>\n            );\n        } else {\n            return (<div className=\"PostList-Empty\">{this.props.empty_message || \"No posts loaded\"}</div>);\n        }\n    }\n}\n\nexport default PostList;\n","\nimport { default as fetchJsonp } from 'fetch-jsonp';\n\nexport class RedditService {\n    static async getHotPosts(subreddit, limit=10) {\n        var data = await fetchJsonp(`https://reddit.com/r/${subreddit}/hot.json`, {\n            jsonpCallback: \"jsonp\"\n        }).then(function(response) { return response.json(); });\n\n        var posts = [];\n        \n        data.data.children.forEach(post => {\n            if(post.kind === \"t3\" && posts.length < limit) {\n                posts.push({\n                    id: post.data.permalink,\n                    url: \"https://reddit.com\" + post.data.permalink,\n                    title: post.data.title,\n                    thumbnail: post.data.thumbnail,\n                    score: post.data.score\n                });\n            }\n        });\n\n        return posts;\n    }\n}\n","import './TopList.css';\n\nimport SearchBox from '../SearchBox/SearchBox.js';\nimport PostList from '../PostList/PostList';\nimport { IconContext } from 'react-icons';\nimport { FaChevronRight } from 'react-icons/fa';\nimport { useState } from 'react';\n\nimport { RedditService } from '../services/RedditService';\n\nfunction TopList() {\n  \n  const [subreddit, setSubreddit] = useState(null);\n  const [posts, setPosts] = useState(null);\n\n  function onSearch(newsub) {\n    if(newsub !== subreddit) {\n      setSubreddit(newsub);\n\n      RedditService.getHotPosts(newsub).then(setPosts);\n    }\n  }\n  \n  return (\n    <div className=\"App\">\n      <header className=\"App-Header\">\n        Top Posts\n        <a className=\"App-Navigation\" href=\"./favourites\">\n          Favourites\n          <IconContext.Provider value={{ color: \"inherit\" }}>\n            <FaChevronRight></FaChevronRight>\n          </IconContext.Provider>\n        </a>\n        <SearchBox onSearch={onSearch} />\n      </header>\n      <div className=\"App-Content\">\n        <PostList posts={posts}></PostList>\n      </div>\n    </div>\n  );\n}\n\nexport default TopList;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import { useState } from 'react';\nimport { IconContext } from 'react-icons';\nimport { FaChevronLeft } from 'react-icons/fa';\nimport PostList from '../PostList/PostList';\nimport { FavouriteService } from '../services/FavouriteService';\nimport './FavouriteList.css';\n\nfunction FavouriteList() {\n\n  const [posts, setPosts] = useState(() => {\n    return Object.values(FavouriteService.getFavourites());\n  });\n\n  return (\n    <div className=\"Favourite\">\n      <div className=\"Favourite-Header\">\n        Favourites\n        <a className=\"Favourite-Navigation\" href=\"../\">\n          <IconContext.Provider value={{ color: \"inherit\" }}>\n            <FaChevronLeft></FaChevronLeft>\n          </IconContext.Provider>\n          Top\n        </a>\n      </div>\n      <div className=\"Favourite-Content\">\n        <PostList posts={posts} empty_message=\"No favourites\"></PostList>\n      </div>\n    </div>\n  );\n}\n\nexport default FavouriteList;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport TopList from './TopList/TopList';\nimport reportWebVitals from './reportWebVitals';\nimport { Route, BrowserRouter, Switch } from 'react-router-dom';\nimport FavouriteList from './FavouriteList/FavouriteList';\n\nReactDOM.render(\n  <React.StrictMode>\n    <BrowserRouter>\n      <Switch>\n        <Route path=\"/favourites\" component={FavouriteList}></Route>\n        <Route path=\"/\" component={TopList}></Route>\n      </Switch>\n    </BrowserRouter>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}